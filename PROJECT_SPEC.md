# 오렌지 당도 추정 AI

## 상태: 완료

## 최근 업데이트
| 날짜 | 내용 |
|------|------|
| 2025.01.21 | 인터페이스 영어로 변경 (고객 요청, 무료 서비스) |

## 기본 정보
- **클라이언트:** 최주혁
- **플랫폼:** 숨고
- **마감:** 2024.12.10 (5일)
- **금액:** ₩300,000 (입금 완료)
- **시작일:** 2024.12.05
- **완료일:** 2024.12.10

## 산출물 (전달 완료)
- **서비스 URL:** https://orange-sweetness-ai-y4swdgp9jnqdwxd4iuycsy.streamlit.app/
- **소스코드:** orange-sweetness-ai-source.zip (3MB) - 고객 전달 완료

## 요구사항

### 필수 (Must Have)
- [ ] 오렌지 사진 1장 업로드 → 당도 등급 + Brix 범위 출력
- [ ] 당도 등급: 높음 / 중간 / 낮음
- [ ] 예상 Brix 범위: 예) 10~12 Brix
- [ ] 2~3초 내 결과 반환
- [ ] 웹 브라우저에서 바로 접속 가능

### 권장 (Should Have)
- [ ] 여러 장 업로드 시 가장 달 것으로 예상되는 순위 비교
- [ ] 분석 근거 간단히 표시 (예: "색상이 진하고 균일함")

### 선택 (Nice to Have)
- [ ] 모바일 반응형
- [ ] 분석 히스토리 저장

## 분석 기준 (외관 기반)
1. **색상 분포**: 주황색 진하기, 균일도
2. **표면 상태**: 광택, 질감
3. **숙성 징후**: 껍질 상태, 색상 변화

## 기술 스택
| 구분 | 기술 |
|------|------|
| AI 모델 | Claude Vision API (우선) 또는 GPT-4 Vision |
| 백엔드 | Python (FastAPI 또는 Flask) |
| 프론트엔드 | Streamlit |
| 배포 | Streamlit Cloud |

## 아키텍처
```
[사용자] → [웹 UI] → [백엔드 API] → [Vision AI] → [당도 추정 로직] → [결과 반환]
```

## 당도 추정 로직
```
1. 이미지 입력
2. Vision AI로 오렌지 외관 분석 요청
   - 색상 분석 (RGB 분포, 주황색 채도)
   - 표면 상태 (광택도, 질감 묘사)
   - 숙성도 판단
3. 분석 결과 기반 당도 등급 매핑
   - 색상 진하고 균일 + 광택 있음 → 높음 (12~14 Brix)
   - 보통 수준 → 중간 (10~12 Brix)
   - 색상 연하거나 불균일 → 낮음 (8~10 Brix)
4. 여러 장인 경우 상대 비교 순위 산출
5. 결과 JSON 반환 → UI 표시
```

## 산출물
- [ ] 웹 서비스 URL (Streamlit Cloud 배포)
- [ ] 간단한 사용 가이드 (UI 내 안내)
- [ ] 소스코드 (필요시)

## 검증 체크리스트

### 기능 검증
- [ ] 단일 이미지 업로드 정상 작동
- [ ] 다중 이미지 업로드 정상 작동
- [ ] 당도 등급 (높음/중간/낮음) 정상 출력
- [ ] Brix 범위 정상 출력
- [ ] 다중 이미지 순위 비교 정상 작동

### 성능 검증
- [ ] 응답 시간 3초 이내
- [ ] 이미지 용량 제한 처리 (10MB 이상 시 안내)
- [ ] 에러 발생 시 적절한 메시지 표시

### 예외 처리 검증
- [ ] 오렌지가 아닌 이미지 업로드 시 안내 메시지
- [ ] 이미지 없이 분석 요청 시 처리
- [ ] API 오류 시 사용자 친화적 에러 메시지

## 주의사항
- 외관 기반 **상대적 추정**임을 UI에 명시
- **별도 학습 데이터 없음** - 일반적 외관 기준 활용
- 조명/각도에 따라 결과 달라질 수 있음 안내
- "참고용 추정"임을 인지시키기

## 리스크 관리
| 리스크 | 대응 방안 |
|--------|----------|
| Vision API 응답 느림 | 로딩 인디케이터 표시, 타임아웃 설정 |
| 분석 결과 부정확 피드백 | 프롬프트 조정으로 판정 기준 튜닝 |
| 오렌지 외 과일 업로드 | 오렌지 여부 먼저 판별 후 진행 |
